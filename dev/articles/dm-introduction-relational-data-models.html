<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to relational data models • dm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to relational data models">
<meta property="og:description" content="dm">
<meta property="og:image" content="https://krlmlr.github.io/dm/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="cynkra-logo-font" href="https://www.cynkra.com">cynkra</a>
        <a class="cynkra-logo" href="https://www.cynkra.com">■</a>
        <a class="navbar-brand" href="../index.html">dm <small>v0.1.2.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-left">
<li>
  <a href="https://pat-s.github.io/dm/index.html">release</a>
</li>
<li>
  <a href="https://pat-s.github.io/dm/dev/index.html">devel</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Intro
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dm.html">Intro</a>
    </li>
    <li>
      <a href="../reference/index.html">Reference</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dm-db.html">Connect to a database</a>
    </li>
    <li>
      <a href="../articles/dm-df.html">Create a dm object from data frames</a>
    </li>
    <li>
      <a href="../articles/dm-introduction-relational-data-models.html">Introduction to relational data models</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dm-class-and-basic-operations.html">Class 'dm' and basic operations</a>
    </li>
    <li>
      <a href="../articles/dm-visualization.html">Visualizing dm objects</a>
    </li>
    <li>
      <a href="../articles/dm-joining.html">Joining in relational data models</a>
    </li>
    <li>
      <a href="../articles/dm-zoom-to-table.html">Zooming and manipulating tables</a>
    </li>
    <li>
      <a href="../articles/dm-filtering.html">Filtering in relational data models</a>
    </li>
    <li>
      <a href="../articles/dm-low-level.html">Checking keys</a>
    </li>
    <li>
      <a href="../articles/dm-function-naming-logic.html">Function naming logic</a>
    </li>
    <li>
      <a href="../articles/dm-version-migration-guide.html">Migration guide: 'cdm' -&gt; 'dm'</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/krlmlr/dm/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to relational data models</h1>
                        <h4 class="author">Katharina Brunner</h4>
            
            <h4 class="date">2020-05-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/krlmlr/dm/blob/master/vignettes/dm-introduction-relational-data-models.Rmd"><code>vignettes/dm-introduction-relational-data-models.Rmd</code></a></small>
      <div class="hidden name"><code>dm-introduction-relational-data-models.Rmd</code></div>

    </div>

    
    
<p>Multiple, linked tables are common within computer science. Because many R users have backgrounds in other disciplines, we present <strong>six important terms in relational data modeling</strong> to help you to jump-start working with {dm}. These terms are:</p>
<ol style="list-style-type: decimal">
<li><a href="#tables">Data Frames and Tables</a></li>
<li><a href="#model">Data Model</a></li>
<li><a href="#pk">Primary Keys</a></li>
<li><a href="#fk">Foreign Keys</a></li>
<li><a href="#normalisation">Normalization</a></li>
<li><a href="#relational-databases">Relational Databases</a></li>
</ol>
<div id="data-frames-and-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#data-frames-and-tables" class="anchor"></a>1. Data Frames and Tables</h2>
<p>A data frame is a fundamental data structure in R. Columns represent variables, rows represent observations. In more technical terms: a data frame is a list of variables of identical length and unique row names. If you imagine it visually, the result is a typical table structure. That is why working with data from spreadsheets is so convenient and the users of the popular <a href="https://dplyr.tidyverse.org">{dplyr}</a> package for data wrangling mainly rely on data frames.</p>
<p>The downside is that data frames and flat file systems like spreadsheets can result in bloated tables because they hold many repetitive values. In the worst case, a data frame can contain multiple columns with only a single value different in each row.</p>
<p>This calls for better data organization by utilizing the resemblance between data frames and database tables, which also consist of columns and rows. The elements are just named differently:</p>
<table class="table">
<thead><tr class="header">
<th>Data Frame</th>
<th>Table</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Column</td>
<td>Attribute</td>
</tr>
<tr class="even">
<td>Row</td>
<td>Tuple</td>
</tr>
</tbody>
</table>
<p>The separation of data into multiple tables helps to improve data quality but in order to take full advantage of the approach, an associated data model is needed to overcome the difficulties that arise with joining multiple tables.</p>
<p>Let’s illustrate this challenge with the data from the <a href="https://github.com/hadley/nycflights13"><code>nycflights13</code> dataset</a> that contains detailed information about the 336776 flights that departed from New York City in 2013. The information is stored in five tables.</p>
<p>Details like the full name of an airport are not available immediately; these can only be obtained by joining or merging the constituent tables, which can result in long and inflated pipe chains full of <code><a href="https://dplyr.tidyverse.org/reference/join.html">left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/join.html">anti_join()</a></code> and other forms of data merging.</p>
<p>In classical {dplyr} notation, you will need three <code><a href="https://dplyr.tidyverse.org/reference/join.html">left_join()</a></code> calls to merge the <code>flights</code> table gradually to <code>airlines</code>, <code>planes</code> and <code>airports</code> tables to create one wide data frame.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="co">#&gt; ── [1mAttaching packages[22m ────────────────────────────────── tidyverse 1.3.0 ──</span>
<span class="co">#&gt; [32m✔[39m [34mggplot2[39m 3.3.0     [32m✔[39m [34mpurrr  [39m 0.3.4</span>
<span class="co">#&gt; [32m✔[39m [34mtibble [39m 3.0.1     [32m✔[39m [34mdplyr  [39m 0.8.5</span>
<span class="co">#&gt; [32m✔[39m [34mtidyr  [39m 1.1.0     [32m✔[39m [34mstringr[39m 1.4.0</span>
<span class="co">#&gt; [32m✔[39m [34mreadr  [39m 1.3.1     [32m✔[39m [34mforcats[39m 0.5.0</span>
<span class="co">#&gt; ── [1mConflicts[22m ───────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; [31m✖[39m [34mdplyr[39m::[32mfilter()[39m masks [34mdm[39m::filter(), [34mstats[39m::filter()</span>
<span class="co">#&gt; [31m✖[39m [34mdplyr[39m::[32mlag()[39m    masks [34mstats[39m::lag()</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dm</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">nycflights13</span>)

<span class="no">flights</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">airlines</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"carrier"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">planes</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"tailnum"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">airports</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"origin"</span> <span class="kw">=</span> <span class="st">"faa"</span>))</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 336,776 x 35</span><span>
#&gt;    year.x month   day dep_time sched_dep_time dep_delay arr_time
#&gt;     </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>          </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>
#&gt; </span><span style="color: #555555;"> 1</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      517            515         2      830
#&gt; </span><span style="color: #555555;"> 2</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      533            529         4      850
#&gt; </span><span style="color: #555555;"> 3</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      542            540         2      923
#&gt; </span><span style="color: #555555;"> 4</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      544            545        -</span><span style="color: #BB0000;">1</span><span>     </span><span style="text-decoration: underline;">1</span><span>004
#&gt; </span><span style="color: #555555;"> 5</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      554            600        -</span><span style="color: #BB0000;">6</span><span>      812
#&gt; </span><span style="color: #555555;"> 6</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      554            558        -</span><span style="color: #BB0000;">4</span><span>      740
#&gt; </span><span style="color: #555555;"> 7</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      555            600        -</span><span style="color: #BB0000;">5</span><span>      913
#&gt; </span><span style="color: #555555;"> 8</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      557            600        -</span><span style="color: #BB0000;">3</span><span>      709
#&gt; </span><span style="color: #555555;"> 9</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      557            600        -</span><span style="color: #BB0000;">3</span><span>      838
#&gt; </span><span style="color: #555555;">10</span><span>   </span><span style="text-decoration: underline;">2</span><span>013     1     1      558            600        -</span><span style="color: #BB0000;">2</span><span>      753
#&gt; </span><span style="color: #555555;"># … with 336,766 more rows, and 28 more variables: sched_arr_time </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   arr_delay </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, carrier </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, flight </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">, tailnum </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   origin </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, dest </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, air_time </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, distance </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, hour </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   minute </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, time_hour </span><span style="color: #555555;font-style: italic;">&lt;dttm&gt;</span><span style="color: #555555;">, name.x </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, year.y </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   type </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, manufacturer </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, model </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, engines </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   seats </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">, speed </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span style="color: #555555;">, engine </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, name.y </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, lat </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">,</span><span>
#&gt; </span><span style="color: #555555;">#   lon </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, alt </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, tz </span><span style="color: #555555;font-style: italic;">&lt;dbl&gt;</span><span style="color: #555555;">, dst </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span style="color: #555555;">, tzone </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>
</span></code></pre>
<p>{dm} offers a more elegant and shorter way to combine tables while augmenting {dplyr}/{dbplyr} workflows.</p>
<p>It is possible to have the best of both worlds: manage your data with {dm} as linked tables, then flatten multiple tables into one for your analysis with {dplyr} on an as-needed basis.</p>
<p>The next step is to create a <a href="#model">data model</a> based on multiple tables:</p>
</div>
<div id="model" class="section level2">
<h2 class="hasAnchor">
<a href="#model" class="anchor"></a>2. Data Model</h2>
<p>A data model shows the structure between multiple tables that can be linked together.</p>
<p>The <code>nycflights13</code> relations can be transferred into the following graphical representation:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">dm</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/dm_nycflights13.html">dm_nycflights13</a></span>(<span class="kw">cycle</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="no">dm</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/dm_draw.html">dm_draw</a></span>()</pre></body></html></div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --><!-- Title: %0 Pages: 1 --><svg width="152pt" height="174pt" viewbox="0.00 0.00 152.00 174.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 170)"><title>%0</title>
<g id="a_graph0"><a xlink:title="Data Model">
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-170 148,-170 148,4 -4,4"></polygon></a>
</g><!-- airlines --><g id="node1" class="node"><title>airlines</title>
<polygon fill="#ed7d31" stroke="transparent" points="95,-141 95,-161 140,-161 140,-141 95,-141"></polygon><text text-anchor="start" x="96.8969" y="-146.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airlines</text><polygon fill="#fbe5d5" stroke="transparent" points="95,-121 95,-141 140,-141 140,-121 95,-121"></polygon><text text-anchor="start" x="97" y="-127.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">carrier</text><polygon fill="none" stroke="#9e5320" stroke-opacity="0.666667" points="93.5,-120 93.5,-162 140.5,-162 140.5,-120 93.5,-120"></polygon></g><!-- airports --><g id="node2" class="node"><title>airports</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-21 94,-41 140,-41 140,-21 94,-21"></polygon><text text-anchor="start" x="95.6192" y="-26.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airports</text><polygon fill="#fbe5d5" stroke="transparent" points="94,-1 94,-21 140,-21 140,-1 94,-1"></polygon><text text-anchor="start" x="96" y="-7.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">faa</text><polygon fill="none" stroke="#9e5320" stroke-opacity="0.666667" points="93,0 93,-42 141,-42 141,0 93,0"></polygon></g><!-- flights --><g id="node3" class="node"><title>flights</title>
<polygon fill="#5b9bd5" stroke="transparent" points="4,-91 4,-111 50,-111 50,-91 4,-91"></polygon><text text-anchor="start" x="9.1115" y="-96.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">flights</text><polygon fill="#deebf6" stroke="transparent" points="4,-71 4,-91 50,-91 50,-71 4,-71"></polygon><text text-anchor="start" x="6" y="-76.4" font-family="Times,serif" font-size="14.00" fill="#444444">carrier</text><polygon fill="#deebf6" stroke="transparent" points="4,-51 4,-71 50,-71 50,-51 4,-51"></polygon><text text-anchor="start" x="5.6115" y="-56.4" font-family="Times,serif" font-size="14.00" fill="#444444">tailnum</text><polygon fill="#deebf6" stroke="transparent" points="4,-31 4,-51 50,-51 50,-31 4,-31"></polygon><text text-anchor="start" x="6" y="-36.4" font-family="Times,serif" font-size="14.00" fill="#444444">origin</text><polygon fill="#deebf6" stroke="transparent" points="4,-11 4,-31 50,-31 50,-11 4,-11"></polygon><text text-anchor="start" x="6" y="-16.4" font-family="Times,serif" font-size="14.00" fill="#444444">dest</text><polygon fill="none" stroke="#3c678e" stroke-opacity="0.666667" points="3,-10 3,-112 51,-112 51,-10 3,-10"></polygon></g><!-- flights&#45;&gt;airlines --><g id="edge1" class="edge"><title>flights:carrier-&gt;airlines:carrier</title>
<path fill="none" stroke="#555555" d="M50,-81C75.9263,-81 68.2444,-118.6007 85.2435,-128.5884"></path><polygon fill="#555555" stroke="#555555" points="84.4523,-131.9981 95,-131 86.132,-125.2026 84.4523,-131.9981"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge2" class="edge"><title>flights:origin-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-41C69.6005,-41 70.6808,-20.4263 83.915,-13.354"></path><polygon fill="#555555" stroke="#555555" points="85.0574,-16.6816 94,-11 83.4662,-9.8648 85.0574,-16.6816"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge3" class="edge"><title>flights:dest-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-21C66.1374,-21 71.8091,-14.5248 83.8583,-11.9954"></path><polygon fill="#555555" stroke="#555555" points="84.3897,-15.4601 94,-11 83.7059,-8.4936 84.3897,-15.4601"></polygon></g><!-- planes --><g id="node4" class="node"><title>planes</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-81 94,-101 140,-101 140,-81 94,-81"></polygon><text text-anchor="start" x="99.1178" y="-86.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">planes</text><polygon fill="#fbe5d5" stroke="transparent" points="94,-61 94,-81 140,-81 140,-61 94,-61"></polygon><text text-anchor="start" x="95.6115" y="-67.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">tailnum</text><polygon fill="none" stroke="#9e5320" stroke-opacity="0.666667" points="93,-60 93,-102 141,-102 141,-60 93,-60"></polygon></g><!-- flights&#45;&gt;planes --><g id="edge4" class="edge"><title>flights:tailnum-&gt;planes:tailnum</title>
<path fill="none" stroke="#555555" d="M50,-61C66.1374,-61 71.8091,-67.4752 83.8583,-70.0046"></path><polygon fill="#555555" stroke="#555555" points="83.7059,-73.5064 94,-71 84.3897,-66.5399 83.7059,-73.5064"></polygon></g><!-- weather --><g id="node5" class="node"><title>weather</title>
<polygon fill="#70ad47" stroke="transparent" points="3,-138 3,-158 51,-158 51,-138 3,-138"></polygon><text text-anchor="start" x="4.8492" y="-143.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">weather</text><polygon fill="none" stroke="#4a732f" stroke-opacity="0.666667" points="2,-137 2,-159 52,-159 52,-137 2,-137"></polygon></g></g></svg><p>The <code>flights</code> table is linked to three other tables: <code>airlines</code>, <code>planes</code> and <code>airports</code>. By using directed arrows, the visualization shows explicitly the connection between different columns (they are called attributes in the relational data sphere).</p>
<p>For example: The column <code>carrier</code> in <code>flights</code> can be joined with the column <code>carrier</code> from the <code>airlines</code> table.</p>
<p>The links between the tables are established through <a href="#pk">primary keys</a> and <a href="#fk">foreign keys</a>.</p>
<p>Further Reading: The {dm} methods for <a href="https://krlmlr.github.io/dm/articles/dm-visualization.html">visualizing data models</a>.</p>
</div>
<div id="pk" class="section level2">
<h2 class="hasAnchor">
<a href="#pk" class="anchor"></a>3. Primary Keys</h2>
<p>In a relational data model, every table needs to have <strong>one column or attribute that uniquely identifies a row</strong>. This column is called the <em>primary key</em> (abbreviated with pk). A primary key can be either an existing column that satifies the condition of being unique, or a new column that assigns an identifier.</p>
<p>Example: In the <code>airlines</code> table of <code>nycflights13</code> the column <code>carrier</code> is the primary key.</p>
<p>You can get all primary keys in a <code>dm</code> by calling <code><a href="../reference/dm_get_all_pks.html">dm_get_all_pks()</a></code>:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">dm</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/dm_get_all_pks.html">dm_get_all_pks</a></span>()</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 3 x 2</span><span>
#&gt;   table    pk_col 
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;keys&gt;</span><span> 
#&gt; </span><span style="color: #555555;">1</span><span> airlines carrier
#&gt; </span><span style="color: #555555;">2</span><span> airports faa    
#&gt; </span><span style="color: #555555;">3</span><span> planes   tailnum
</span></code></pre>
<p>If an attribute is suitable as a primary key, it can be checked with <code><a href="../reference/enum_pk_candidates.html">dm_enum_pk_candidates()</a></code>. Which columns of the <code>airlines</code> table can serve as a primary key?</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">dm</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/enum_pk_candidates.html">dm_enum_pk_candidates</a></span>(<span class="no">airports</span>)</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 8 x 3</span><span>
#&gt;   columns candidate why                                                    
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;keys&gt;</span><span>  </span><span style="color: #555555;font-style: italic;">&lt;lgl&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                                                  
#&gt; </span><span style="color: #555555;">1</span><span> faa     TRUE      </span><span style="color: #555555;">""</span><span>                                                     
#&gt; </span><span style="color: #555555;">2</span><span> lon     TRUE      </span><span style="color: #555555;">""</span><span>                                                     
#&gt; </span><span style="color: #555555;">3</span><span> alt     FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: 0, 1, 3, 4, 5, …</span><span style="color: #555555;">"</span><span>               
#&gt; </span><span style="color: #555555;">4</span><span> dst     FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: A, N, U</span><span style="color: #555555;">"</span><span>                        
#&gt; </span><span style="color: #555555;">5</span><span> lat     FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: 38.88944, 40.63975</span><span style="color: #555555;">"</span><span>             
#&gt; </span><span style="color: #555555;">6</span><span> name    FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: All Airports, Capital City Airp…
#&gt; </span><span style="color: #555555;">7</span><span> tz      FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: -10, -9, -8, -7, -6, …</span><span style="color: #555555;">"</span><span>         
#&gt; </span><span style="color: #555555;">8</span><span> tzone   FALSE     </span><span style="color: #555555;">"</span><span>has duplicate values: America/Anchorage, America/Chic…
</span></code></pre>
<p>Further Reading: The {dm} package offers several functions for dealing with <a href="https://krlmlr.github.io/dm/articles/dm-class-and-basic-operations.html#pk">primary keys</a>.</p>
</div>
<div id="fk" class="section level2">
<h2 class="hasAnchor">
<a href="#fk" class="anchor"></a>4. Foreign Keys</h2>
<p>The <strong>counterpart of a primary key in one table is the foreign key in another table</strong>. In order to join two tables, the primary key of the first table needs to be available in the second table as well. This second column is called the <em>foreign key</em> (abbreviated with fk).</p>
<p>For example, if you want to link the <code>airlines</code> table to the <code>flights</code> table, the primary key in <code>airlines</code> needs to match the foreign key in <code>flights</code>. This condition is satisfied because the column <code>carrier</code> is present as a primary key in the <code>airlines</code> table as well as a foreign key in the <code>flights</code> table. You can find foreign key candidates with the function <code><a href="../reference/dm_enum_fk_candidates.html">dm_enum_fk_candidates()</a></code>, they are marked with <code>TRUE</code> in the <code>candidate</code> column.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">dm</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/dm_enum_fk_candidates.html">dm_enum_fk_candidates</a></span>(<span class="no">flights</span>, <span class="no">airlines</span>)</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 19 x 3</span><span>
#&gt;    columns      candidate why                                              
#&gt;    </span><span style="color: #555555;font-style: italic;">&lt;keys&gt;</span><span>       </span><span style="color: #555555;font-style: italic;">&lt;lgl&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                                            
#&gt; </span><span style="color: #555555;"> 1</span><span> carrier      TRUE      </span><span style="color: #555555;">""</span><span>                                               
#&gt; </span><span style="color: #555555;"> 2</span><span> tailnum      FALSE     </span><span style="color: #555555;">"</span><span>11080 entries (98.7%) of `flights$tailnum` not …
#&gt; </span><span style="color: #555555;"> 3</span><span> dest         FALSE     </span><span style="color: #555555;">"</span><span>11227 entries (100%) of `flights$dest` not in `…
#&gt; </span><span style="color: #555555;"> 4</span><span> origin       FALSE     </span><span style="color: #555555;">"</span><span>11227 entries (100%) of `flights$origin` not in…
#&gt; </span><span style="color: #555555;"> 5</span><span> air_time     FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;"> 6</span><span> arr_delay    FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;"> 7</span><span> arr_time     FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;"> 8</span><span> day          FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;"> 9</span><span> dep_delay    FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">10</span><span> dep_time     FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">11</span><span> distance     FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">12</span><span> flight       FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">13</span><span> hour         FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">14</span><span> minute       FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">15</span><span> month        FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">16</span><span> sched_arr_t… FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">17</span><span> sched_dep_t… FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
#&gt; </span><span style="color: #555555;">18</span><span> time_hour    FALSE     </span><span style="color: #555555;">"</span><span>cannot join a POSIXct object with an object tha…
#&gt; </span><span style="color: #555555;">19</span><span> year         FALSE     </span><span style="color: #555555;">"</span><span>Can't join on 'value' x 'value' because of inco…
</span></code></pre>
<p>After finding and assigning foreign keys, get the name of the set foreign key:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">dm</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/dm_get_fk.html">dm_get_fk</a></span>(<span class="no">flights</span>, <span class="no">airlines</span>)
<span class="co">#&gt; &lt;list_of&lt;character&gt;[1]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] "carrier"</span></pre></body></html></div>
<p>Further Reading: All {dm} functions for working with <a href="https://krlmlr.github.io/dm/articles/dm-class-and-basic-operations.html#foreign-keys">foreign keys</a>.</p>
</div>
<div id="normalisation" class="section level2">
<h2 class="hasAnchor">
<a href="#normalisation" class="anchor"></a>5. Normalization</h2>
<p>Normalization is a technical term that describes the <strong>central design principle of a relational data model</strong>: splitting data into multiple tables.</p>
<p>A normalized data schema consists of several relations (tables) that are linked with attributes (columns). The relations can be joined together by means of <a href="#pk">primary</a> and <a href="#fk">foreign keys</a>. The main goal of normalization is to keep data organization as clean and simple as possible by avoiding redundant data entries.</p>
<p>For example, if you want to change the name of one airport in the <code>nycflights13</code> dataset, you will only need to update a single data value. This principle is sometimes called the <em>single point of truth</em>.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co">#  Update in one single location...</span>
<span class="no">airlines</span>[<span class="no">airlines</span>$<span class="no">carrier</span> <span class="kw">==</span> <span class="st">"UA"</span>, <span class="st">"name"</span>] <span class="kw">&lt;-</span> <span class="st">"United broke my guitar"</span>

<span class="no">airlines</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">carrier</span> <span class="kw">==</span> <span class="st">"UA"</span>)</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 1 x 2</span><span>
#&gt;   carrier name                  
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                 
#&gt; </span><span style="color: #555555;">1</span><span> UA      United broke my guitar
</span></code></pre>
<div class="sourceCode" id="cb8"><html><body><pre class="r">
<span class="co"># ...propagates to all related records</span>
<span class="no">flights</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(<span class="no">airlines</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">flight</span>, <span class="no">name</span>)
<span class="co">#&gt; Joining, by = "carrier"</span></pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 336,776 x 2</span><span>
#&gt;    flight name                    
#&gt;     </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                   
#&gt; </span><span style="color: #555555;"> 1</span><span>   </span><span style="text-decoration: underline;">1</span><span>545 United broke my guitar  
#&gt; </span><span style="color: #555555;"> 2</span><span>   </span><span style="text-decoration: underline;">1</span><span>714 United broke my guitar  
#&gt; </span><span style="color: #555555;"> 3</span><span>   </span><span style="text-decoration: underline;">1</span><span>141 American Airlines Inc.  
#&gt; </span><span style="color: #555555;"> 4</span><span>    725 JetBlue Airways         
#&gt; </span><span style="color: #555555;"> 5</span><span>    461 Delta Air Lines Inc.    
#&gt; </span><span style="color: #555555;"> 6</span><span>   </span><span style="text-decoration: underline;">1</span><span>696 United broke my guitar  
#&gt; </span><span style="color: #555555;"> 7</span><span>    507 JetBlue Airways         
#&gt; </span><span style="color: #555555;"> 8</span><span>   </span><span style="text-decoration: underline;">5</span><span>708 ExpressJet Airlines Inc.
#&gt; </span><span style="color: #555555;"> 9</span><span>     79 JetBlue Airways         
#&gt; </span><span style="color: #555555;">10</span><span>    301 American Airlines Inc.  
#&gt; </span><span style="color: #555555;"># … with 336,766 more rows</span><span>
</span></code></pre>
<p>Another way to demonstrate normalization is splitting a table into two parts.</p>
<p>Let’s look at the <code>planes</code> table, which consists of 3322 individual tail numbers and corresponding information for the specific airplane, like the year it was manufactured or the average cruising speed.</p>
<p>The function <code><a href="../reference/decompose_table.html">decompose_table()</a></code> extracts two new tables and creates a new key <code>model_id</code>, that links both tables.</p>
<p>This results in a <code>parent_table</code> and a <code>child_table</code> that differ massively in the number of rows:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">planes</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/decompose_table.html">decompose_table</a></span>(<span class="no">model_id</span>, <span class="no">model</span>, <span class="no">manufacturer</span>, <span class="no">type</span>, <span class="no">engines</span>, <span class="no">seats</span>, <span class="no">manufacturer</span>, <span class="no">speed</span>)</pre></body></html></div>
<pre class="fansi fansi-output"><code>#&gt; $child_table
#&gt; <span style="color: #555555;"># A tibble: 3,322 x 4</span><span>
#&gt;    tailnum  year engine    model_id
#&gt;    </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>
#&gt; </span><span style="color: #555555;"> 1</span><span> N10156   </span><span style="text-decoration: underline;">2</span><span>004 Turbo-fan      120
#&gt; </span><span style="color: #555555;"> 2</span><span> N102UW   </span><span style="text-decoration: underline;">1</span><span>998 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 3</span><span> N103US   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 4</span><span> N104UW   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 5</span><span> N10575   </span><span style="text-decoration: underline;">2</span><span>002 Turbo-fan      119
#&gt; </span><span style="color: #555555;"> 6</span><span> N105UW   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 7</span><span> N107US   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 8</span><span> N108UW   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"> 9</span><span> N109UW   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;">10</span><span> N110UW   </span><span style="text-decoration: underline;">1</span><span>999 Turbo-fan       94
#&gt; </span><span style="color: #555555;"># … with 3,312 more rows</span><span>
#&gt; 
#&gt; $parent_table
#&gt; </span><span style="color: #555555;"># A tibble: 147 x 7</span><span>
#&gt;    model_id model     manufacturer type                 engines seats speed
#&gt;       </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>                  </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span> </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>
#&gt; </span><span style="color: #555555;"> 1</span><span>        1 150       CESSNA       Fixed wing single e…       1     2    90
#&gt; </span><span style="color: #555555;"> 2</span><span>        2 172E      CESSNA       Fixed wing single e…       1     4   105
#&gt; </span><span style="color: #555555;"> 3</span><span>        3 172M      CESSNA       Fixed wing single e…       1     4   108
#&gt; </span><span style="color: #555555;"> 4</span><span>        4 172N      CESSNA       Fixed wing single e…       1     4   105
#&gt; </span><span style="color: #555555;"> 5</span><span>        5 206B      BELL         Rotorcraft                 1     5   112
#&gt; </span><span style="color: #555555;"> 6</span><span>        6 210-5(20… CESSNA       Fixed wing single e…       1     6    </span><span style="color: #BB0000;">NA</span><span>
#&gt; </span><span style="color: #555555;"> 7</span><span>        7 230       BELL         Rotorcraft                 2    11    </span><span style="color: #BB0000;">NA</span><span>
#&gt; </span><span style="color: #555555;"> 8</span><span>        8 310Q      CESSNA       Fixed wing multi en…       2     6   167
#&gt; </span><span style="color: #555555;"> 9</span><span>        9 421C      CESSNA       Fixed wing multi en…       2     8    90
#&gt; </span><span style="color: #555555;">10</span><span>       10 550       CESSNA       Fixed wing multi en…       2     8    </span><span style="color: #BB0000;">NA</span><span>
#&gt; </span><span style="color: #555555;"># … with 137 more rows</span><span>
</span></code></pre>
<p>While <code>child_table</code> contains 3322 unique <code>tailnum</code> rows and therefore consists of 3322 rows, just like the original <code>planes</code> table, the <code>parent_table</code> shrunk to just 147 rows, enough to store all relevant combinations and avoid storing redundant information.</p>
<p>Further Reading: See the <a href="https://simple.wikipedia.org/wiki/Database_normalisation">Simple English Wikipedia article on database normalisation</a> for more details.</p>
</div>
<div id="relational-databases" class="section level2">
<h2 class="hasAnchor">
<a href="#relational-databases" class="anchor"></a>6. Relational Databases</h2>
<p>{dm} is built upon relational data models but it is not a database itself. Databases are systems for data management and many of them are constructed as relational databases, e.g. SQLite, MySQL, MSSQL, Postgres. As you can guess from the names of the databases, SQL, short for <strong>s</strong>tructured <strong>q</strong>uerying <strong>l</strong>anguage, plays an important role: it was invented for the purpose of querying relational databases.</p>
<p>In production, the data is stored in a relational database and {dm} is used to work with the data.</p>
<p>Therefore, {dm} can copy data <a href="https://krlmlr.github.io/dm/articles/dm.html#copy">from and to databases</a>, and works transparently with both in-memory data and with relational database systems.</p>
<p>For example, let’s create a local Sqlite database and copy the <code>dm</code> object to it:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">src_sqlite</span> <span class="kw">&lt;-</span> <span class="fu">src_sqlite</span>(<span class="st">":memory:"</span>, <span class="kw">create</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">src_sqlite</span>
<span class="co">#&gt; src:  sqlite 3.30.1 [:memory:]</span>
<span class="co">#&gt; tbls:</span>
<span class="fu"><a href="../reference/copy_dm_to.html">copy_dm_to</a></span>(<span class="no">src_sqlite</span>, <span class="no">dm</span>)
<span class="no">src_sqlite</span>
<span class="co">#&gt; src:  sqlite 3.30.1 [:memory:]</span>
<span class="co">#&gt; tbls: airlines, airports, flights, planes, sqlite_stat1, sqlite_stat4,</span>
<span class="co">#&gt;   weather</span></pre></body></html></div>
<p>In the opposite direction, <code>dm</code> can also be populated with data from a DB. Unfortunately, this currently works only for MSSQL and Postgres, but not for Sqlite. Therefore, we cannot show the results here just yet:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu">dm_learn_from_db</span>(<span class="no">src_sqlite</span>)</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="footer-left">
  <p>dm is sponsored by <a class="cynkra-logo-font-footer" href="https://www.cynkra.com">cynkra</a><a class="cynkra-logo-footer" href="https://www.cynkra.com">■</a>. Learn more at <a href="https://www.cynkra.com/">www.cynkra.com</a>.</p>
</div>

<div class="footer-right">
  <p>Developed by Tobias Schieferdecker, <a href="http://krlmlr.info">Kirill Müller</a>, Darko Bergant, <a href="https://www.energie360.ch"><img src="https://krlmlr.github.io/dm/reference/figures/energie-72.png" height="16"></a>, <a href="https://www.cynkra.com"><img src="https://krlmlr.github.io/dm/reference/figures/cynkra-72.png" height="16"></a>.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
